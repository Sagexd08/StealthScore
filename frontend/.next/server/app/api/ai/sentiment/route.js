"use strict";(()=>{var e={};e.id=571,e.ids=[571],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},87561:e=>{e.exports=require("node:fs")},49411:e=>{e.exports=require("node:path")},59408:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>u,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var n={};i.r(n),i.d(n,{POST:()=>l});var r=i(49303),a=i(88716),o=i(60670),s=i(87070),c=i(24910),p=i(69731);async function l(e){try{let{userId:t}=await (0,c.I)();if(!t)return s.NextResponse.json({error:"Unauthorized"},{status:401});let{pitchText:i}=await e.json();if(!i||"string"!=typeof i)return s.NextResponse.json({error:"Pitch text is required"},{status:400});if(i.length<20)return s.NextResponse.json({error:"Pitch text must be at least 20 characters long"},{status:400});let n=await p.Z.analyzePitchSentiment(i);return s.NextResponse.json({success:!0,data:n,timestamp:new Date().toISOString(),userId:t})}catch(e){return s.NextResponse.json({error:"Failed to analyze sentiment",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}let m=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/ai/sentiment/route",pathname:"/api/ai/sentiment",filename:"route",bundlePath:"app/api/ai/sentiment/route"},resolvedPagePath:"C:\\Users\\sohom\\OneDrive\\Desktop\\Coding\\PitchGuard\\frontend\\src\\app\\api\\ai\\sentiment\\route.ts",nextConfigOutput:"export",userland:n}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:h}=m,g="/api/ai/sentiment/route";function y(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},69731:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(11258);class r{constructor(){this.openRouterApiKey=process.env.OPENROUTER_API_KEY||"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",this.geminiApiKey=process.env.GEMINI_API_KEY||process.env.NEXT_PUBLIC_GEMINI_API_KEY||"",this.geminiApiKey&&(this.geminiAI=new n.$D(this.geminiApiKey))}async callOpenRouter(e,t,i){if(!this.openRouterApiKey)throw Error("OpenRouter API key not configured");let n=[];i&&n.push({role:"system",content:i}),n.push({role:"user",content:t});let r=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${this.openRouterApiKey}`,"Content-Type":"application/json","HTTP-Referer":"https://stealthscore.ai","X-Title":"Stealth Score"},body:JSON.stringify({model:e,messages:n,temperature:.7,max_tokens:2e3})});if(!r.ok)throw Error(`OpenRouter API error: ${r.statusText}`);let a=await r.json();return a.choices[0]?.message?.content||""}async callGemini(e,t){if(!this.geminiAI)throw Error("Gemini API key not configured");try{let i=this.geminiAI.getGenerativeModel({model:"gemini-pro"}),n=t?`${t}

${e}`:e,r=await i.generateContent(n);return(await r.response).text()}catch(e){throw Error("Failed to generate content with Gemini")}}async analyzePitchSentiment(e){let t=`Analyze the sentiment and persuasiveness of this pitch text:

"${e}"

Return a JSON response with:
- sentiment: "positive", "negative", or "neutral"
- confidence: number between 0-100
- emotionalTone: array of emotional descriptors
- persuasivenessScore: number between 0-100

Focus on confidence, enthusiasm, clarity, and persuasive language.`;try{let e=await this.callGemini(t,"You are an expert in sentiment analysis and communication psychology. Analyze the emotional tone, confidence level, and persuasiveness of business pitches.");return JSON.parse(e)}catch(e){return{sentiment:"neutral",confidence:50,emotionalTone:["uncertain"],persuasivenessScore:50}}}async analyzeMarketFit(e,t){let i=`Analyze the market fit for this ${t} pitch:

"${e}"

Return a JSON response with:
- marketSize: descriptive size assessment
- timing: "excellent", "good", "fair", or "poor"
- competitionLevel: "low", "medium", or "high"
- growthPotential: number between 0-100

Consider current market trends, timing, and competitive landscape.`;try{let e=await this.callOpenRouter("deepseek/deepseek-r1",i,"You are a market research expert and venture capital analyst. Analyze market opportunities, timing, and competitive landscapes for startups.");return JSON.parse(e)}catch(e){return{marketSize:"Medium-sized market",timing:"good",competitionLevel:"medium",growthPotential:70}}}async generateCompetitiveAnalysis(e,t){let i=`Analyze the competitive landscape for this ${t} startup:

"${e}"

Return a JSON array of competitive insights and recommendations for differentiation.`;try{let e=await this.callOpenRouter("mistralai/mistral-large",i,"You are a competitive intelligence expert. Identify key competitors, market positioning, and differentiation opportunities.");return JSON.parse(e)}catch(e){return["Competitive analysis unavailable"]}}async generateInvestorMatching(e,t){let i=`Suggest investor types and characteristics for this ${t} startup:

"${e}"

Return a JSON array of investor recommendations with reasoning.`;try{let e=await this.callOpenRouter("deepseek/deepseek-r1",i,"You are a venture capital expert. Match startups with appropriate investors based on sector, stage, and investment thesis.");return JSON.parse(e)}catch(e){return["Investor matching unavailable"]}}async generatePresentationOptimization(e){let t=`Analyze this pitch and provide optimization recommendations:

"${e}"

Return a JSON array of specific, actionable recommendations for improving the presentation structure, content flow, and delivery.`;try{let e=await this.callGemini(t,"You are a presentation expert and communication coach. Provide specific recommendations for improving pitch presentations.");return JSON.parse(e)}catch(e){return["Presentation optimization unavailable"]}}async performComprehensiveAnalysis(e,t="technology",i="seed"){try{let[n,r,a,o,s]=await Promise.all([this.analyzePitchSentiment(e),this.analyzeMarketFit(e,t),this.generateCompetitiveAnalysis(e,t),this.generateInvestorMatching(e,i),this.generatePresentationOptimization(e)]),c=Math.round(.3*n.persuasivenessScore+.25*r.growthPotential+.2*n.confidence+(100-("high"===r.competitionLevel?80:"medium"===r.competitionLevel?60:40))*.15+("excellent"===r.timing?95:"good"===r.timing?80:"fair"===r.timing?60:40)*.1),p=[{id:"1",type:"positive"===n.sentiment?"strength":"weakness",title:`${n.sentiment.charAt(0).toUpperCase()+n.sentiment.slice(1)} Sentiment`,description:`Your pitch conveys a ${n.sentiment} tone with ${n.confidence}% confidence.`,confidence:n.confidence,impact:n.confidence>80?"high":n.confidence>60?"medium":"low"},{id:"2",type:"excellent"===r.timing||"good"===r.timing?"opportunity":"threat",title:"Market Timing",description:`Market timing is ${r.timing} with ${r.competitionLevel} competition level.`,confidence:85,impact:"excellent"===r.timing?"high":"medium"}];return{overallScore:c,sentimentScore:n.persuasivenessScore,clarityScore:n.confidence,marketFitScore:r.growthPotential,investorAppealScore:Math.round((n.persuasivenessScore+r.growthPotential)/2),competitiveEdgeScore:"low"===r.competitionLevel?85:"medium"===r.competitionLevel?70:55,insights:p,recommendations:[...s.slice(0,3),...a.slice(0,2),...o.slice(0,2)]}}catch(e){return{overallScore:75,sentimentScore:80,clarityScore:75,marketFitScore:70,investorAppealScore:75,competitiveEdgeScore:70,insights:[{id:"1",type:"strength",title:"Analysis in Progress",description:"AI analysis is being processed. Please try again in a moment.",confidence:50,impact:"medium"}],recommendations:["AI analysis temporarily unavailable. Please try again."]}}}}let a=new r}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[510,910,586],()=>i(59408));module.exports=n})();